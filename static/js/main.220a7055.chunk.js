(this["webpackJsonpmy-2048"]=this["webpackJsonpmy-2048"]||[]).push([[0],{13:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var i=n(6),r=n(2),a=n(3),s=n(5),o=n(4),l=n(1),c=n.n(l),u=n(8),h=n.n(u),v=(n(13),0),f=1,p=2,d=3;function y(e){return Math.floor(Math.random()*e)}var m=function(){function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;Object(r.a)(this,e),this.row=t,this.col=n,this.val=i,this.nextVal=a,this.rowDestination=s,this.colDestination=o,this.mergedInto=l,this.cellIdentifier=c||e.nextIdentifierAvailable++}return Object(a.a)(e,[{key:"isEmpty",value:function(){return 0===this.val}},{key:"applyMoveAndClear",value:function(){this.isMoving()&&(this.row=this.rowDestination,this.col=this.colDestination,0!==this.nextVal&&(this.val=this.nextVal,this.nextVal=0),this.rowDestination=null,this.colDestination=null)}},{key:"moveBy",value:function(e,t){switch(null===this.rowDestination&&(this.rowDestination=this.row),null===this.colDestination&&(this.colDestination=this.col),t){case v:this.rowDestination=this.rowDestination-e;break;case p:this.rowDestination=this.rowDestination+e;break;case d:this.colDestination=this.colDestination-e;break;case f:this.colDestination=this.colDestination+e;break;default:return}}},{key:"isMoving",value:function(){return null!==this.rowDestination||null!==this.colDestination}},{key:"markGettingMerged",value:function(){this.mergedInto=!0}},{key:"isGettingMerged",value:function(){return this.mergedInto}},{key:"copy",value:function(){return new e(this.row,this.col,this.val,this.nextVal,this.rowDestination,this.colDestination,this.mergedInto,this.cellIdentifier)}}]),e}();m.nextIdentifierAvailable=1;var b=function(){function e(t,n,i){Object(r.a)(this,e),this.ROWS=t,this.COLUMNS=n,i?this.cells=i:(this.cells=Array(t).fill().map((function(){return Array(n).fill()})),e.initializeGrid(this.cells,t,n))}return Object(a.a)(e,[{key:"copy",value:function(){var t=this.cells.map((function(e){return e.map((function(e){return e.copy()}))}));return new e(this.ROWS,this.COLUMNS,t)}},{key:"getNonEmptyCells",value:function(){var e=[];return this.cells.forEach((function(t){t.forEach((function(t){t.isEmpty()||e.push(t)}))})),e}},{key:"applyChanges",value:function(){var t=this,n=this.cells.flat();return e.initializeGrid(this.cells,this.ROWS,this.COLUMNS),n.forEach((function(e){e.isMoving()?e.isGettingMerged()||(t.cells[e.rowDestination][e.colDestination]=e,e.applyMoveAndClear()):e.isEmpty()||e.isGettingMerged()||(t.cells[e.row][e.col]=e)})),this}},{key:"spawnCells",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=[];if(this.cells.forEach((function(e){e.forEach((function(e){e.isEmpty()&&n.push(e)}))})),n.length<e)return!1;for(var i=0;i<e;i++){var r=y(n.length),a=n[r];this.cells[a.row][a.col].val=t,n.splice(r,1)}return!0}},{key:"move",value:function(e){var t=this.copy().applyChanges(),n=[];switch(e){case v:for(var i=0;i<t.COLUMNS;i++){for(var r=[],a=0;a<t.ROWS;a++)r.push(t.cells[a][i]);n.push(r)}break;case p:for(var s=0;s<t.COLUMNS;s++){for(var o=[],l=t.ROWS-1;l>=0;l--)o.push(t.cells[l][s]);n.push(o)}break;case d:n=t.cells.map((function(e){return e.slice()}));break;case f:n=t.cells.map((function(e){return e.slice().reverse()}));break;default:return}return n.forEach((function(t){for(var n=null,i=0;i<t.length;i++){var r=t[i];if(r.isEmpty())for(var a=i+1;a<t.length;a++)t[a].isEmpty()||t[a].moveBy(1,e);else if(null===n)n=r;else if(n.val===r.val){n.markGettingMerged(),r.nextVal=2*r.val;for(var s=i;s<t.length;s++)t[s].isEmpty()||t[s].moveBy(1,e);n=null}else n=r}})),t.cells.flat().reduce((function(e,t){return e+(t.isMoving()?1:0)}),0)?t:this}},{key:"toString",value:function(){return this.cells.map((function(e){return e.map((function(e){return e.val})).join(" ")})).join("\r\n")}}],[{key:"initializeGrid",value:function(e,t,n){for(var i=0;i<t;i++)for(var r=0;r<n;r++)e[i][r]=new m(i,r);return e}}]),e}(),j=n(0),g=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"bg-cell",style:{gridRow:this.props.row+1,gridColumn:this.props.col+1}})}}]),n}(c.a.Component),w=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).divRef=c.a.createRef(),a.animate=a.animate.bind(Object(i.a)(a)),a}return Object(a.a)(n,[{key:"render",value:function(){var e={gridRow:this.props.cell.row+1,gridColumn:this.props.cell.col+1},t=Math.min(2048,this.props.cell.val),n="value-cell value-".concat(t);return Object(j.jsx)("div",{className:n,style:e,ref:this.divRef,children:this.props.cell.val})}},{key:"animate",value:function(e){}},{key:"componentDidUpdate",value:function(e){}}]),n}(c.a.Component),O=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(e){var a;Object(r.a)(this,n),(a=t.call(this,e)).handleKeyDown=a.handleKeyDown.bind(Object(i.a)(a));var s=new b(e.rows,e.columns);return s.spawnCells(1),a.state={board:s},a}return Object(a.a)(n,[{key:"generateBackgroundCells",value:function(e,t){for(var n=[],i=0;i<e;i++)for(var r=0;r<t;r++)n.push(Object(j.jsx)(g,{row:i,col:r},i*t+r));return n}},{key:"handleKeyDown",value:function(e){var t,n,i=this.state.board;switch(e.keyCode){case 40:n=p;break;case 39:n=f;break;case 38:n=v;break;case 37:n=d;break;default:return}(t=i.move(n))!==i&&(t.applyChanges(),t.spawnCells(1),this.setState({board:t}))}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.generateBackgroundCells(this.props.rows,this.props.columns),t=this.state.board.getNonEmptyCells().map((function(e){return Object(j.jsx)(w,{cell:e},e.cellIdentifier)}));return Object(j.jsxs)("div",{className:"gamegrid",children:[e,t]})}}]),n}(c.a.Component),k=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"header",children:Object(j.jsx)("h1",{children:" My-2048 "})})}}]),n}(c.a.Component),D=function(e){Object(s.a)(n,e);var t=Object(o.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("div",{className:"gamecontainer",children:[Object(j.jsx)(k,{}),Object(j.jsx)(O,{rows:this.props.rows,columns:this.props.columns})]})}}]),n}(c.a.Component);h.a.render(Object(j.jsx)(D,{rows:4,columns:4}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.220a7055.chunk.js.map